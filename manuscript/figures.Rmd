---
output: pdf_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE,cache = TRUE)
```

```{r library_load,cache=FALSE}
source('../code/library_load.R')
```

```{r prep}
source('../code/data_prep.R')
```

# Figures

```{r siteLocations,fig.cap='Map showing locations of the nine sites used for collection of phenotypic descriptors.',fig.width=3,fig.height=5}
source('../code/site_locations.R')
site_locations_map
```

```{r site_differences,fig.cap='Differences between sites in phenotypic descriptors analysed by supervised Random Forest. a) Multidimensional scaling (MDS) plot of random forest proximity values of individual trees scaled to two dimensions. Mean margin value shown. b) Relative descriptor Gini importances measures.',fig.height=5}
source('../code/site_differences.R')
grid.arrange(site_differences$a,site_differences$b,nrow = 1)
```

```{r DI_space,fig.cap=''}
DIspace()
```

```{r descriptor_contributions, fig.cap = ''}
source('../code/descriptor_contributions.R')
descriptor_contributions %>%
  wrap_plots() + 
  plot_annotation(title = 'Descriptor importance scores from random forest models for relative contributions to\ndecline index measures',caption = 'Gini importance scores averaged across 100 repetitions')
```